/*!
 * TinyGradient 0.3.1
 * Copyright 2014-2015 Damien "Mistic" Sorel (http://www.strangeplanet.fr)
 * Licensed under MIT (http://opensource.org/licenses/MIT)
 */
(function(n,t){typeof module!="undefined"&&module.exports?module.exports=t(require("tinycolor2")):typeof define=="function"&&define.amd?define(["tinycolor"],t):n.tinygradient=t(n.tinycolor)})(this,function(n){"use strict";var i={rgba_max:{r:256,g:256,b:256,a:1},hsva_max:{h:360,s:1,v:1,a:1},stepize:function(n,t,i){var u={};for(var r in n)n.hasOwnProperty(r)&&(u[r]=(t[r]-n[r])/i);return u},interpolate:function(n,t,i,r){var f={};for(var u in t)t.hasOwnProperty(u)&&(f[u]=n[u]*i+t[u],f[u]=f[u]<0?f[u]+r[u]:r[u]!=1?f[u]%r[u]:f[u]);return f},rgb:function(t,r,u){for(var e=t.color.toRgb(),h=r.color.toRgb(),o=[t.color],c=i.stepize(e,h,u),s,f=1;f<u;f++)s=i.interpolate(c,e,f,i.rgba_max),o.push(n(s));return o},hsv:function(t,r,u,f){var e=t.color.toHsv(),o=r.color.toHsv(),h=[t.color],c=i.stepize(e,o,u),l,a,s;for(l=e.h<=o.h&&!f||e.h>=o.h&&f?o.h-e.h:f?360-o.h+e.h:360-e.h+o.h,c.h=Math.pow(-1,f)*Math.abs(l)*1/u,s=1;s<u;s++)a=i.interpolate(c,e,s,i.hsva_max),h.push(n(a));return h},substeps:function(n,t){var f=n.length,i,u,o,r,e,s,h;if(t=parseInt(t),isNaN(t)||t<2)throw new Error("Invalid number of steps (< 2)");if(t<f)throw new Error("Number of steps cannot be inferior to number of stops");for(i=[],u=1;u<f;u++)o=(t-1)*(n[u].pos-n[u-1].pos),i.push(Math.max(1,Math.round(o)));for(r=1,e=f-1;e--;)r+=i[e];while(r!=t)r<t?(s=Math.min.apply(null,i),i[i.indexOf(s)]++,r++):(h=Math.max.apply(null,i),i[i.indexOf(h)]--,r--);return i}},t=function(i){if(arguments.length==1){if(!(arguments[0]instanceof Array))throw new Error('"stops" is not an array');i=arguments[0]}else i=Array.prototype.slice.call(arguments);if(!(this instanceof t))return new t(i);if(i.length<2)throw new Error("Invalid number of stops (< 2)");var u=i[0].pos!==undefined,f=i.length,r=-1;this.stops=i.map(function(t,i){var e=t.pos!==undefined;if(u^e)throw new Error("Cannot mix positionned and not posionned color stops");if(e){if(t={color:n(t.color),pos:t.pos},t.pos<0||t.pos>1)throw new Error("Color stops positions must be between 0 and 1");else if(t.pos<=r)throw new Error("Color stops positions are not ordered");r=t.pos}else t={color:n(t),pos:i/(f-1)};return t});this.stops[0].pos!==0&&this.stops.unshift({color:this.stops[0].color,pos:0});this.stops[this.stops.length-1].pos!==1&&this.stops.push({color:this.stops[this.stops.length-1].color,pos:1})};return t.prototype.reverse=function(){var n=[];return this.stops.forEach(function(t){n.push({color:t.color,pos:1-t.pos})}),new t(n.reverse())},t.prototype.rgb=function(n){for(var f=i.substeps(this.stops,n),r=[],t=0,u=this.stops.length;t<u-1;t++)r=r.concat(i.rgb(this.stops[t],this.stops[t+1],f[t]));return r.push(this.stops[u-1].color),r},t.prototype.hsv=function(n,t){for(var s=i.substeps(this.stops,n),l=t===!0,h=typeof t=="string",e=[],u,f,o,r=0,c=this.stops.length;r<c-1;r++)u=this.stops[r].color.toHsv(),f=this.stops[r+1].color.toHsv(),h&&(o=u.h<f.h&&f.h-u.h<180||u.h>f.h&&u.h-f.h>180),e=u.s===0||f.s===0?e.concat(i.rgb(this.stops[r],this.stops[r+1],s[r])):e.concat(i.hsv(this.stops[r],this.stops[r+1],s[r],t==="long"&&o||t==="short"&&!o||!h&&l));return e.push(this.stops[c-1].color),e},t.prototype.css=function(n,t){n=n||"linear";t=t||(n=="linear"?"to right":"ellipse at center");var i=n+"-gradient("+t;return this.stops.forEach(function(n){i+=", "+n.color.toRgbString()+" "+n.pos*100+"%"}),i+=")"},t.rgb=function(n,i){return n=Array.prototype.slice.call(arguments),i=n.pop(),t.apply(null,n).rgb(i)},t.hsv=function(n,i,r){return n=Array.prototype.slice.call(arguments),r=n.pop(),i=n.pop(),t.apply(null,n).hsv(i,r)},t.css=function(n,i,r){return n=Array.prototype.slice.call(arguments),r=n.pop(),i=n.pop(),t.apply(null,n).css(i,r)},t});