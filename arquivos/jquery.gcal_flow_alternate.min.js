(function(){var t,s,n,r,i,u,f,h,o,e;if(t=jQuery,n={},n.error=n.warn=n.log=n.info=n.debug=function(){},e="",typeof window!="undefined"&&window!==null&&typeof console!="undefined"&&console!==null&&console.log!=null){if(!window._gCalFlow_quiet)for(o=["error","warn","info"],f=0,h=o.length;f<h;f++)u=o[f],n[u]=function(){return console[u]?console[u].apply(console,arguments):console.log.apply(console,arguments)};window._gCalFlow_debug&&(n.debug=function(){return console.debug!=null?console.debug.apply(console,arguments):console.log.apply(console,arguments)})}i=function(n,t){var f,u,i,r;if(t==null&&(t=2),10*(t-1)<=n)return n;for(u="",f=i=1,r=t-(""+n).length;1<=r?i<=r:i>=r;f=1<=r?++i:--i)u=u.concat("0");return u.concat(n)};s=function(){function r(t,i){this.target=t;t.addClass("row widget-content widget-default-widget widget agenda-list-container  gCalFlow");t.children().size()>0&&(n.debug("Target node has children, use target element as template."),this.template=t);this.update_opts(i)}r.demo_apikey="AIzaSyD0vtTUjLXzH4oKCzNRDymL6E3jKBympf0";r.prototype.target=null;return r.prototype.template=t('<div class="row widget-content widget-default-widget widget agenda-list-container gCalFlow ">\n<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 default-widget"> \n<div class="gcf-item-container-block">\n    <h4 class="gcf-item-year"><\/h4>\n<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12  info-item agenda-item-container gcf-item-block color-tertiary-background-color">\n  <div class="row">     <div class="col-xs-12 col-sm-4 col-md-5 col-lg-5  agenda-date-double gcf-item-header-block">\n        <div class="gcf-item-date-block agenda-date-item">\n          <span class="gcf-item-dateinterval"><\/span>\n        <\/div>\n   <\/div>\n      <div class="col-xs-12 col-sm-8 col-md-7 col-lg-7  event-description gcf-item-body-block">\n  <div class="gcf-header-block">\n    <div class="gcf-title-block ">\n      <span class="gcf-title"><\/span>\n    <\/div>\n  <\/div>\n<h5 class="gcf-item-title-block event-title">\n          <strong class="gcf-item-title"><\/strong>\n        <\/h5>\n       <div class="gcf-item-location">\n        <\/div>\n      <div class="text-right saiba-mais">\n<a target="_blank"  title="Saiba mais" data-toggle="modal" class="gcf-item-link link-color-color">Mais detalhes<\/a><div class="text-left modal fade gcf-item-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"><div class="modal-dialog " role="document"><div class="modal-content"><div class="modal-header"><div class="gcf-header-block">\n    <div class="gcf-title-block ">\n      <span class="gcf-title"><\/span>\n    <\/div>\n  <\/div>\n<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">x<\/span><\/button> <h4 class="modal-title" id="myModalLabel"><strong class="gcf-item-title"><\/strong><\/h4> <\/div><div class="modal-body"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><fieldset class="box-fieldset"><div class="row"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"><div class="row  detail-group"><div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 detail-item"><div class="gcf-item gcf-item-daterange"><\/div><div class="gcf-item"><span class="gcf-item-location"><\/span><span class="gcf-item-map"><\/span><\/div><div class="gcf-item gcf-item-description"><\/div><a target="_blank"  title="Ver no Google Agenda" class="gcf-item-link-google link-color-color">Ver no Google Agenda<\/a><\/div><\/div><\/div><\/div><\/fieldset><\/div><\/div><\/div><div class="modal-footer"><button type="button" style="min-height: 44px;" class="btn btn-default" title="Fechar" data-dismiss="modal">Fechar<\/button><a target="_blank" style="border-radius: 0;"  title="Adicionar à minha Agenda" class="btn btn-primary btn-default btn-read-more link-field link-field-items-link background-primary-button-background-color primary-button-border-border-color font-color-primary-button-color gcf-item-link-google-add"><i class="fa fa-plus"><\/i> Adicionar à minha Agenda<\/a><\/div><\/div><\/div><\/div><\/div>\n<\/div>\n    <\/div>\n  <\/div>\n <\/div>\n <div class="text-right calendar-full">Calend�rio Completo<\/div>\n<\/div>\n<\/div>'),r.prototype.opts={maxitem:15,calid:null,apikey:"AIzaSyDLZ3H7FJkxJsqNA6H8sdN4eAnprlfvjCQ",mode:"upcoming",feed_url:null,url_summary_cal:null,title_cal:"",display_header:!1,auto_scroll:!1,scroll_interval:7e3,link_title:!1,link_item_title:!1,link_item_description:!1,link_item_location:!1,link_target:"_blank",item_description_as_html:!0,callback:null,no_items_html:"",globalize_culture:typeof navigator!="undefined"&&navigator!==null&&(navigator.browserLanguage||navigator.language||navigator.userLanguage),globalize_fmt_datetime:"dd' 'MMM', 'yyyy' 'HH':'mm'h'",globalize_fmt_date:"dd' 'MMM",globalize_fmt_time:"HH':'mm'h'",globalize_fmt_monthday:"dd' 'MMM",globalize_fmt_monthdayYear:"dd' 'MMM', 'yyyy' '",globalize_fmt_daymonthYear:"dd'/'MM'/'yyyy' '",globalize_fmt_month:"MMM",globalize_fmt_day:"dd",eventCalendarIdExtract:function(n,t){var i=t.split("@"),r=btoa(n+" "+i[0]+"@g"),u=r.split("==");return u[0]},date_formatter:function(n,t){return typeof Globalize!="undefined"&&Globalize!==null&&Globalize.format!=null?t?"<strong>Início: <\/strong>"+Globalize.format(n,this.globalize_fmt_daymonthYear):"<strong>Início: <\/strong>"+Globalize.format(n,this.globalize_fmt_daymonthYear)+" à(s) "+Globalize.format(n,this.globalize_fmt_time):t?""+n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate()):""+n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate())+" "+i(n.getHours())+":"+i(n.getMinutes())},date_formatter_interval:function(n,t){return typeof Globalize!="undefined"&&Globalize!==null&&Globalize.format!=null?'<div class="date-item date-item-left">\n<div><strong>'+i(n.getDate())+'<\/strong><\/div>\n<div class="date-item-month">'+Globalize.format(n,this.globalize_fmt_month)+"<\/div>\n<\/div>":t?""+n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate()):""+n.getFullYear()+"-"+i(n.getMonth()+1)+"-"+i(n.getDate())+" "+i(n.getHours())+":"+i(n.getMinutes())},dateinterval_formatter:function(n,t,r){var u,f;return f=this.date_formatter_interval(n,r),r&&(t=new Date(t.getTime()-864e5)),u="",(n.getDate()!==t.getDate()||n.getMonth()!==t.getMonth())&&(u+=typeof Globalize!="undefined"&&Globalize!==null&&Globalize.format!=null?'<div class="date-item date-item-right">\n<div><strong>'+Globalize.format(t,this.globalize_fmt_day)+'<\/strong><\/div>\n<div class="date-item-month">'+Globalize.format(t,this.globalize_fmt_month)+"<\/div>\n<\/div>":""+i(t.getMonth()+1)+"-"+i(t.getDate())),u&&(f+=' <div class="date-item date-item-conection">a<\/div> '+u),f},daterange_formatter:function(n,t,r){var u,f;return f=this.date_formatter(n,r),r&&(t=new Date(t.getTime()-864e5)),u="",u+=typeof Globalize!="undefined"&&Globalize!==null&&Globalize.format!=null?"<strong>  Término: <\/strong>"+Globalize.format(t,this.globalize_fmt_daymonthYear):""+i(t.getMonth()+1)+"-"+i(t.getDate()),r||n.getHours()===t.getHours()&&n.getMinutes()===t.getMinutes()||(u+=typeof Globalize!="undefined"&&Globalize!==null&&Globalize.format!=null?" à(s) "+Globalize.format(t,this.globalize_fmt_time):" "+i(t.getHours())+":"+i(t.getMinutes())),u&&(f+=" "+u),f}},r.prototype.update_opts=function(i){return n.debug("update_opts was called"),n.debug("old options:",this.opts),this.opts=t.extend({},this.opts,i),n.debug("new options:",this.opts)},r.prototype.gcal_url=function(){var t;if(!this.opts.calid&&!this.opts.feed_url&&!this.opts.url_summary_cal){n.error("Option calid and feed_url are missing. Abort URL generation");this.target.text("Error: You need to set 'calid' or 'feed_url' option.");throw"gCalFlow: calid and feed_url missing";}return this.opts.feed_url?this.opts.feed_url:this.opts.url_summary_cal?(this.target.html('<div class="text-center loading-image-calendar"><i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"><\/i><span class="sr-only">Carregando...<\/span><\/div>'),0):this.opts.mode==="updates"?(t=(new Date).toJSON(),"https://www.googleapis.com/calendar/v3/calendars/"+this.opts.calid+"/events?key="+this.opts.apikey+"&maxResults="+this.opts.maxitem+"&orderBy=updated&timeMin="+t+"&singleEvents=true"):(t=(new Date).toJSON(),"https://www.googleapis.com/calendar/v3/calendars/"+this.opts.calid+"/events?key="+this.opts.apikey+"&maxResults="+this.opts.maxitem+"&orderBy=startTime&timeMin="+t+"&singleEvents=true")},r.prototype.parse_date=function(t){var u,f,i,e,o,r,c,s,h;if(i=t.match(/^(\d{4})-(\d{2})-(\d{2})$/))return new Date(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),0,0,0);if(r=(new Date).getTimezoneOffset()*6e4,h=o=u=null,f=e=s=0,i=t.match(/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|([+-])(\d{2}):(\d{2}))$/))h=parseInt(i[1],10),o=parseInt(i[2],10),u=parseInt(i[3],10),f=parseInt(i[4],10),e=parseInt(i[5],10),s=parseInt(i[6],10),r=new Date(h,o-1,u,f,e,s).getTimezoneOffset()*6e4,i[7]!=="Z"&&(r+=(i[8]==="+"?1:-1)*(parseInt(i[9],10)*60+parseInt(i[10],10))*6e4);else return n.warn("Time parse error! Unknown time pattern: "+t),new Date(1970,1,1,0,0,0);return n.debug("time parse (gap to local): "+r),c=new Date(new Date(h,o-1,u,f,e,s).getTime()-r),n.debug("time parse: "+t+" -> ",c),c},r.prototype.fetch=function(){var u,i=this,f=this.opts.maxitem,s=this.opts.apikey,e=this.opts.title_cal,o=(new Date).toJSON();if(n.debug("Starting ajax call for "+this.gcal_url()),this.opts.apikey===this.constructor.demo_apikey&&(n.warn("You are using built-in demo API key! This key is provided for tiny use or demo only. Your access may be limited."),n.warn("Please check document and consider to use your own key.")),u=function(t){return n.debug("Ajax call success. Response data:",t),i.render_data(t,i)},this.gcal_url()==0){var r=this.opts.url_summary_cal;t.ajax({url:r}).done(function(n){r+="/events/goves?";t(n).each(function(n,t){r+="calendars="+t.name+"&"});r+="maxResults="+f+"&orderBy=startTime&timeMin="+o+"&singleEvents=true";t.ajax({url:r}).done(function(n){function s(){this.kind="calendar#events";this.etag="";this.summary=e;this.calendarIdArray=[];this.description="";this.updated="";this.timeZone="America/Sao_Paulo";this.accessRole="reader";this.items=[]}var u=[],o=0,r={};t(n).each(function(n,t){u.push(t)});t(u).sort(function(n,t){var r=n.start.dateTime?n.start.dateTime:n.start.date,u=t.start.dateTime?t.start.dateTime:t.start.date;return new Date(i.parse_date(r))-new Date(i.parse_date(u))}).each(function(){if(o>=f)return!1;r.updated==""&&(r.updated=this.updated);t.inArray(this.organizer.email,r.calendarIdArray)<0&&r.calendarIdArray.push(this.organizer.email);r.items.push(this);o++}).promise().done(function(){return i.render_data(r,i)})})})}else return t.ajax({type:"GET",success:u,dataType:"jsonp",url:this.gcal_url()})},r.prototype.render_data=function(i){var u,w,a,r,b,tt,v,y,f,h,k,c,l,d,o,s,p,it,rt,g,nt;if(n.debug("start rendering for data:",i),o=this.template.clone(),this.opts.calid?s=(rt=this.opts.titlelink)!=null?rt:"http://www.google.com/calendar/embed?src="+this.opts.calid:this.opts.url_summary_cal?(s="https://calendar.google.com/calendar/embed?title="+i.summary+"&mode=AGENDA",t(i.calendarIdArray).each(function(n,t){s+="&src="+t})):s="javascript:void(0);",!this.opts.url_summary_cal&&this.opts.display_header&&(this.opts.link_title?o.find(".gcf-title").html(t("<a />").attr({target:this.opts.link_target,href:s}).text(i.summary)):o.find(".gcf-title").text(i.summary)),o.find(".gcf-link").attr({target:this.opts.link_target,href:s}),o.find(".gcf-last-update").html(this.opts.date_formatter(this.parse_date(i.updated))),f=o.find(".gcf-item-block"),f.detach(),f=t(f[0]),n.debug("item block template:",f),h=t(),n.debug("render entries:",i.items),w=this.opts.item_description_as_html?"html":"text",i.items!=null&&i.items.length>0)for(g=i.items.slice(0,+this.opts.maxitem+1||9e9),p=0,it=g.length;p<it;p++)r=g[p],n.debug("formatting entry:",r),this.opts.url_summary_cal&&this.opts.display_header&&(this.opts.link_title?f.find(".gcf-title").html(t("<a />").attr({target:this.opts.link_target,href:"http://www.google.com/calendar/embed?src="+r.organizer.email}).text(r.organizer.displayName)):f.find(".gcf-title").text(r.organizer.displayName)),u=f.clone(),r.start&&(l=r.start.dateTime?r.start.dateTime:r.start.date,c=this.parse_date(l),d=this.opts.date_formatter(c,l.indexOf(":")<0),u.find(".gcf-item-date").html(d),u.find(".gcf-item-start-date").html(d)),r.end&&(b=r.end.dateTime?r.end.dateTime:r.end.date,a=this.parse_date(b),tt=this.opts.date_formatter(a,b.indexOf(":")<0),u.find(".gcf-item-end-date").html(tt),u.find(".gcf-item-daterange").html(this.opts.daterange_formatter(c,a,l.indexOf(":")<0)),u.find(".gcf-item-dateinterval").html(this.opts.dateinterval_formatter(c,a,l.indexOf(":")<0))),u.find(".gcf-item-update-date").html(this.opts.date_formatter(this.parse_date(r.updated),!1)),k=t("<a />").attr({target:this.opts.link_target,href:r.htmlLink}),this.opts.link_item_title?u.find(".gcf-item-title").html(k.clone().text(r.summary)):u.find(".gcf-item-title").text(r.summary),this.opts.link_item_description?u.find(".gcf-item-description").html(k.clone()[w](r.description)):u.find(".gcf-item-description")[w](r.description),this.opts.link_item_location?(v="<b>Local:<\/b> <a href='https://maps.google.de/maps?q="+encodeURI(r.location.replace(" ","+"))+"' target='new'>"+r.location+"<\/a>",u.find(".gcf-item-location").html(v)):r.location===undefined||r.location===null?u.find(".gcf-item-location").text(r.location):(u.find(".gcf-item-location").html("<b>Local: <\/b>"+r.location),v='<a title="Ver no mapa" href=\'https://maps.google.de/maps?q='+encodeURI(r.location.replace(" ","+"))+"' target='new'> (Ver no mapa)<\/a>",u.find(".gcf-item-map").html(v)),u.find(".gcf-item-link").attr({href:"#gcf-item-modal-"+r.id}),u.find(".gcf-item-link-google").attr({href:r.htmlLink}),u.find(".gcf-item-link-google-add").attr({href:"https://calendar.google.com/calendar/event?action=TEMPLATE&tmeid="+this.opts.eventCalendarIdExtract(r.id,r.organizer.email)+"&tmsrc="+r.organizer.email+"&catt=false&pprop=HowCreated:DUPLICATE&hl=pt-BR&scp=ONE"}),u.find(".gcf-item-modal").attr("id","gcf-item-modal-"+r.id),n.debug("formatted item entry:",u[0]),nt="",e.localeCompare(c.getFullYear().toString())!=0&&(e=c.getFullYear().toString(),nt=jQuery.parseHTML('<h4 class="gcf-item-block gcf-item-year">'+e+"<\/h4>"),h.push(nt[0])),h.push(u[0]);else h=t('<div class="gcf-no-items"><\/div>').html(this.opts.no_items_html);return n.debug("formatted item entry array:",h),y=o.find(".gcf-item-container-block"),n.debug("item container element:",y),y.html(h),y.parent().find(".calendar-full").html(t("<a />").attr({target:this.opts.link_target,href:s,title:"Ver Calendário"}).text("Ver Calendário")),this.target.html(o.html()),this.bind_scroll(),this.opts.callback?this.opts.callback.apply(this.target):void 0},r.prototype.bind_scroll=function(){var i,t,u,r;if(t=this.target.find(".gcf-item-container-block"),i=t.find(".gcf-item-block"),n.debug("scroll container:",t),this.opts.auto_scroll&&!(t.size()<1)&&!(i.size()<2))return r={idx:0},u=function(){var u;return n.debug("current scroll position:",t.scrollTop()),n.debug("scroll capacity:",t[0].scrollHeight-t[0].clientHeight),typeof i[r.idx]=="undefined"||t.scrollTop()>=t[0].scrollHeight-t[0].clientHeight?(n.debug("scroll to top"),r.idx=0,t.animate({scrollTop:i[0].offsetTop})):(u=i[r.idx].offsetTop,n.debug("scroll to "+u+"px"),t.animate({scrollTop:u}),r.idx+=1)},setInterval(u,this.opts.scroll_interval)},r}();r={init:function(n){var t;return n==null&&(n={}),t=this.data("gCalFlow"),t?void 0:this.data("gCalFlow",{target:this,obj:new s(this,n)})},destroy:function(){var n;return n=this.data("gCalFlow"),n.obj.target=null,t(window).unbind(".gCalFlow"),n.gCalFlow.remove(),this.removeData("gCalFlow")},render:function(){return typeof Globalize!="undefined"&&Globalize!==null&&Globalize.culture!=null&&Globalize.culture(this.data("gCalFlow").obj.opts.globalize_culture),this.data("gCalFlow").obj.fetch()}};t.fn.gCalFlow=function(n){var i;return i=arguments,typeof n!="object"&&n?r[n]?this.each(function(){return r[n].apply(t(this),Array.prototype.slice.call(i,1))}):n==="version"?"3.0.1":t.error("Method "+n+" does not exist on jQuery.gCalFlow"):this.each(function(){return r.init.apply(t(this),i),r.render.apply(t(this),i)})}}).call(this);